{"version":3,"file":"js/CommonsChunk/utils.js","sources":["webpack:///node_modules/gome-utils-http-filters/index.js","webpack:///node_modules/gome-utils-env/index.js","webpack:///node_modules/gome-utils-query/index.js","webpack:///node_modules/gome-utils-base64/index.js","webpack:///node_modules/gome-utils-cookie/index.js","webpack:///node_modules/gome-utils-host/index.js","webpack:///node_modules/gome-utils-http/index.js","webpack:///node_modules/gome-utils-app-version/index.js"],"sourcesContent":["/*\r\n * @Author: zhaoye \r\n * @Date: 2017-02-16 20:56:03 \r\n * @Last Modified by: zhaoye\r\n * @Last Modified time: 2017-02-20 13:00:42\r\n */\r\nexport default {\r\n    //默认情况\r\n    default: function(data){\r\n        return new Promise((resolve, reject) => {\r\n            if(data.isSuccess == 'Y'){\r\n                resolve(data);\r\n            }else if(data.isSuccess == 'N'){\r\n                reject(new Error(data.failReason || data.msgContent || '网络请求错误'));\r\n            }\r\n        })\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-http-filters/index.js","/*\r\n * @Author: zhaoye \r\n * @Date: 2017-01-03 17:17:04 \r\n * @Last Modified by: zhaoye\r\n * @Last Modified time: 2017-03-06 13:39:50\r\n */\r\n\r\n/**\r\n * @param Object \r\n * 通过ua判断的环境变量\r\n */\r\nlet env = {\r\n\r\n    /****按终端分*****/\r\n    //wap，浏览器中\r\n    wap      :  false,\r\n    //app中，包含网页嵌套和混合app本地页面\r\n    app      :  false,\r\n    //混合app\r\n    hybrid   :  false,\r\n    //微信\r\n    wechat   :  false,\r\n\r\n    \r\n\r\n    /****特殊容器*****/\r\n    //国美在线容器\r\n    gome     :  false,\r\n    //美信容器\r\n    gomeplus :  false,\r\n    plusWebview:  false,\r\n    /****按环境分*****/\r\n    //开发模式（混合app专用）\r\n    dev      :  false,\r\n    //线上环境\r\n    live     :  false,\r\n    //uat环境\r\n    uat      :  false,\r\n    //预生产\r\n    tslive   :  false,\r\n\r\n\r\n    //什么都判断不出来    \r\n    unknown  :  false,\r\n}\r\n\r\n//判断是否开发模式（仅混合app）\r\nif(window.navigator.userAgent.match(/dev/)){\r\n    env.dev = true;\r\n    env.hybrid = true;\r\n}\r\n\r\n//判断环境\r\nif(window.location.host.match(/gome\\.com\\.cn|gomeplus\\.com/)){\r\n    env.live = true;\r\n}else if(window.location.host.match(/uat.*\\.com/)){\r\n    env.uat = true;\r\n}else if(window.location.host.match(/tslive\\.com\\.cn/)){\r\n    env.tslive = true;\r\n}else{\r\n    env.unknown = true;\r\n}\r\n\r\n\r\n//通过域名判断站点\r\nif(window.location.host.match(/gome\\.com\\.cn|atguat\\.com\\.cn/)){\r\n    env.gome = true;\r\n}else if(window.location.host.match(/gomeplus\\.com|uatplus\\.com/)){\r\n    env.gomeplus = true;\r\n}\r\n\r\n//判断终端\r\nif(window.location.href.match(/^file\\:\\/\\//) || env.dev){\r\n//用于混合app的判断\r\n    env.app = true;\r\n    env.hybrid = true;\r\n}\r\nif(window.navigator.userAgent.match(/gome/)){\r\n    //用于wap内嵌app的判断（判断ua）\r\n    env.app = true;\r\n    //容器判断站点\r\n    //再判断ua，如果出现冲突，ua覆盖域名\r\n    if(window.navigator.userAgent.match(/gomeplus/)){\r\n        env.gomeplus = true;\r\n        env.gome = false;\r\n        if(window.navigator.userAgent.match(/\\/(plus$|plus[^_])/)){\r\n            env.plusWebview = true;\r\n        }\r\n    }else{\r\n        env.gomeplus = false;\r\n        env.gome = true;\r\n    }\r\n\r\n}else if(window.navigator.userAgent.match(/MicroMessenger/i)){\r\n    env.wechat = true;\r\n    env.wap = true;\r\n}else{\r\n    env.wap = true;\r\n}\r\nif(window.location.href.match(/^http/)){\r\n    env.wap = true;\r\n}\r\n\r\n\r\n//系统判断\r\nlet system = {\r\n    android: false,\r\n    ios: false\r\n}\r\nif(window.navigator.userAgent.match(/android/i)){\r\n    system.android = true;\r\n}else if(window.navigator.userAgent.match(/iPhone|iPad/i)){\r\n    system.ios = true;\r\n}\r\nif(env.unknown && window.PackConfig){\r\n    env[PackConfig.PLATFORM.toLowerCase()] = true;\r\n    env[PackConfig.ENV.toLowerCase()] = true;\r\n}\r\n\r\n//第三方环境复写\r\nif(window.GomeBridgePreConfig && window.GomeBridgePreConfig.env){\r\n    for(var key in GomeBridgePreConfig.env){\r\n        env[key] = GomeBridgePreConfig.env[key];\r\n    }\r\n}\r\n\r\nexport {\r\n    env,\r\n    system\r\n}\r\n\r\nexport default {\r\n    env,\r\n    system\r\n}\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-env/index.js","class Query  {\r\n    parse (query){\r\n        query = query.replace(/^\\?/,'')\r\n        const arr = query.split(/&/)\r\n        let result = {}\r\n        for(let i=0; i<arr.length; i++){\r\n            const keyvalue = arr[i].split(/\\=/)\r\n            result[keyvalue[0]] = keyvalue[1]\r\n        }\r\n        return result\r\n    }\r\n    queryify (json,prefix) {\r\n        prefix = prefix || \"?\"\r\n        let query = prefix\r\n        for(let key in json){\r\n            query += (key + '=' +json[key]) + '&'\r\n        }\r\n        return query.replace(/\\&$/,'')\r\n    }\r\n}\r\nexport default new Query;\r\n\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-query/index.js","/*\r\n * $Id: base64.js,v 2.15 2014/04/05 12:58:57 dankogai Exp dankogai $\r\n *\r\n *  Licensed under the BSD 3-Clause License.\r\n *    http://opensource.org/licenses/BSD-3-Clause\r\n *\r\n *  References:\r\n *    http://en.wikipedia.org/wiki/Base64\r\n * \r\n * modefied by zhaoye \r\n */\r\n \r\nvar version = \"2.1.9\";\r\n// if node.js, we use Buffer\r\nvar buffer;\r\n// if (typeof module !== 'undefined' && module.exports) {\r\n//     try {\r\n//         buffer = require('buffer').Buffer;\r\n//     } catch (err) {}\r\n// }\r\n// constants\r\nvar b64chars\r\n    = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\nvar b64tab = function(bin) {\r\n    var t = {};\r\n    for (var i = 0, l = bin.length; i < l; i++) t[bin.charAt(i)] = i;\r\n    return t;\r\n}(b64chars);\r\nvar fromCharCode = String.fromCharCode;\r\n// encoder stuff\r\nvar cb_utob = function(c) {\r\n    if (c.length < 2) {\r\n        var cc = c.charCodeAt(0);\r\n        return cc < 0x80 ? c\r\n            : cc < 0x800 ? (fromCharCode(0xc0 | (cc >>> 6))\r\n                            + fromCharCode(0x80 | (cc & 0x3f)))\r\n            : (fromCharCode(0xe0 | ((cc >>> 12) & 0x0f))\r\n                + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\r\n                + fromCharCode(0x80 | ( cc         & 0x3f)));\r\n    } else {\r\n        var cc = 0x10000\r\n            + (c.charCodeAt(0) - 0xD800) * 0x400\r\n            + (c.charCodeAt(1) - 0xDC00);\r\n        return (fromCharCode(0xf0 | ((cc >>> 18) & 0x07))\r\n                + fromCharCode(0x80 | ((cc >>> 12) & 0x3f))\r\n                + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\r\n                + fromCharCode(0x80 | ( cc         & 0x3f)));\r\n    }\r\n};\r\nvar re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\r\nvar utob = function(u) {\r\n    return u.replace(re_utob, cb_utob);\r\n};\r\nvar cb_encode = function(ccc) {\r\n    var padlen = [0, 2, 1][ccc.length % 3],\r\n    ord = ccc.charCodeAt(0) << 16\r\n        | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)\r\n        | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0)),\r\n    chars = [\r\n        b64chars.charAt( ord >>> 18),\r\n        b64chars.charAt((ord >>> 12) & 63),\r\n        padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\r\n        padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\r\n    ];\r\n    return chars.join('');\r\n};\r\nvar btoa = function(b) {\r\n    return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\r\n};\r\nvar _encode = buffer ? function (u) {\r\n    return (u.constructor === buffer.constructor ? u : new buffer(u))\r\n    .toString('base64')\r\n}\r\n: function (u) { return btoa(utob(u)) }\r\n;\r\nvar encode = function(u, urisafe) {\r\n    return !urisafe\r\n        ? _encode(String(u))\r\n        : _encode(String(u)).replace(/[+\\/]/g, function(m0) {\r\n            return m0 == '+' ? '-' : '_';\r\n        }).replace(/=/g, '');\r\n};\r\nvar encodeURI = function(u) { return encode(u, true) };\r\n// decoder stuff\r\nvar re_btou = new RegExp([\r\n    //因为webpack uglify之后就报错了噩噩噩噩噩，只能这样了\r\n    decodeURI('%5B%C3%80-%C3%9F%5D%5B%C2%80-%C2%BF%5D'),\r\n    decodeURI('%5B%C3%80-%C3%9F%5D%5B%C2%80-%C2%BF%5D')+'{2}',\r\n    decodeURI('%5B%C3%80-%C3%9F%5D%5B%C2%80-%C2%BF%5D')+'{3}'\r\n].join('|'), 'g');\r\nvar cb_btou = function(cccc) {\r\n    switch(cccc.length) {\r\n    case 4:\r\n        var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\r\n            |    ((0x3f & cccc.charCodeAt(1)) << 12)\r\n            |    ((0x3f & cccc.charCodeAt(2)) <<  6)\r\n            |     (0x3f & cccc.charCodeAt(3)),\r\n        offset = cp - 0x10000;\r\n        return (fromCharCode((offset  >>> 10) + 0xD800)\r\n                + fromCharCode((offset & 0x3FF) + 0xDC00));\r\n    case 3:\r\n        return fromCharCode(\r\n            ((0x0f & cccc.charCodeAt(0)) << 12)\r\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\r\n                |  (0x3f & cccc.charCodeAt(2))\r\n        );\r\n    default:\r\n        return  fromCharCode(\r\n            ((0x1f & cccc.charCodeAt(0)) << 6)\r\n                |  (0x3f & cccc.charCodeAt(1))\r\n        );\r\n    }\r\n};\r\nvar btou = function(b) {\r\n    return b.replace(re_btou, cb_btou);\r\n};\r\nvar cb_decode = function(cccc) {\r\n    var len = cccc.length,\r\n    padlen = len % 4,\r\n    n = (len > 0 ? b64tab[cccc.charAt(0)] << 18 : 0)\r\n        | (len > 1 ? b64tab[cccc.charAt(1)] << 12 : 0)\r\n        | (len > 2 ? b64tab[cccc.charAt(2)] <<  6 : 0)\r\n        | (len > 3 ? b64tab[cccc.charAt(3)]       : 0),\r\n    chars = [\r\n        fromCharCode( n >>> 16),\r\n        fromCharCode((n >>>  8) & 0xff),\r\n        fromCharCode( n         & 0xff)\r\n    ];\r\n    chars.length -= [0, 0, 2, 1][padlen];\r\n    return chars.join('');\r\n};\r\nvar atob = function(a){\r\n    return a.replace(/[\\s\\S]{1,4}/g, cb_decode);\r\n};\r\nvar _decode = buffer ? function(a) {\r\n    return (a.constructor === buffer.constructor\r\n            ? a : new buffer(a, 'base64')).toString();\r\n}\r\n: function(a) { return btou(atob(a)) };\r\nvar decode = function(a){\r\n    return _decode(\r\n        String(a).replace(/[-_]/g, function(m0) { return m0 == '-' ? '+' : '/' })\r\n            .replace(/[^A-Za-z0-9\\+\\/]/g, '')\r\n    );\r\n};\r\n// export Base64\r\nmodule.exports = {\r\n    VERSION: version,\r\n    atob: atob,\r\n    btoa: btoa,\r\n    fromBase64: decode,\r\n    toBase64: encode,\r\n    utob: utob,\r\n    encode: encode,\r\n    encodeURI: encodeURI,\r\n    btou: btou,\r\n    decode: decode,\r\n};\r\n// if ES5 is available, make Base64.extendString() available\r\nif (typeof Object.defineProperty === 'function') {\r\n    var noEnum = function(v){\r\n        return {value:v,enumerable:false,writable:true,configurable:true};\r\n    };\r\n    module.exports.extendString = function () {\r\n        Object.defineProperty(\r\n            String.prototype, 'fromBase64', noEnum(function () {\r\n                return decode(this)\r\n            }));\r\n        Object.defineProperty(\r\n            String.prototype, 'toBase64', noEnum(function (urisafe) {\r\n                return encode(this, urisafe)\r\n            }));\r\n        Object.defineProperty(\r\n            String.prototype, 'toBase64URI', noEnum(function () {\r\n                return encode(this, true)\r\n            }));\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-base64/index.js","class Cookie {\r\n    constructor () {\r\n\r\n    }\r\n    parse () {\r\n        try{\r\n            const cookieArr = document.cookie.split(';')\r\n            let cookieMap = {};\r\n            cookieArr.forEach(function(item){\r\n                cookieMap[item.split('=')[0].trim()] = item.split('=')[1].trim()\r\n            })\r\n            return cookieMap\r\n        }catch(e){\r\n            return {}\r\n        }\r\n    }\r\n    set (c_name, value, time, domain) {\r\n        const expires = ((time==null) ? \"\" : \";expires=\" + new Date(new Date().getTime() + Number(time)).toGMTString())\r\n        domain = !domain ? '' : ';domain=' + domain\r\n        document.cookie=c_name+ \"=\" + escape(value) + domain + expires + ';path=/'\r\n    }\r\n}\r\nexport default new Cookie;\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-cookie/index.js","/*\r\n * @Author: zhaoye \r\n * @Date: 2017-01-03 17:54:33 \r\n * @Last Modified by: zhaoye\r\n * @Last Modified time: 2017-05-31 10:17:06\r\n */\r\n\r\n//站点域名\r\n\r\nimport {env, system} from 'gome-utils-env';\r\nimport version from 'gome-utils-app-version';\r\nlet host = {};\r\n\r\nObject.defineProperty(host, '__root', {\r\n    get: () =>{\r\n        let _host = '';\r\n        if(env.hybrid){\r\n            //混合app\r\n            //国美在线\r\n            if(env.gome){\r\n                if(env.live)\r\n                    _host = 'gome.com.cn';\r\n                else if(env.uat)\r\n                    _host = 'atguat.com.cn';\r\n                else if(env.tslive)\r\n                    _host = 'tslive.com.cn';\r\n                else\r\n                    _host = 'gome.com.cn';\r\n            }else{\r\n                //默认美信\r\n                if(env.live)\r\n                    _host = 'gomeplus.com';\r\n                else if(env.uat)\r\n                    _host = 'uatplus.com';\r\n                else if(env.tslive)\r\n                //瞎写的\r\n                    _host = 'tsliveplus.com';\r\n                else\r\n                    _host = 'gomeplus.com';\r\n            }\r\n        }else{\r\n            if(location.href.match(/gome\\.com\\.cn|atguat/)){\r\n                if(env.live)\r\n                    _host = 'gome.com.cn';\r\n                else if(env.uat)\r\n                    _host = 'atguat.com.cn';\r\n                else if(env.tslive)\r\n                    _host = 'tslive.com.cn';\r\n                else\r\n                    _host = 'gome.com.cn';\r\n            }else{\r\n                //默认美信\r\n                if(env.live)\r\n                    _host = 'gomeplus.com';\r\n                else if(env.uat)\r\n                    _host = 'uatplus.com';\r\n                else if(env.tslive)\r\n                //瞎写的\r\n                    _host = 'tsliveplus.com';\r\n                else\r\n                    _host = 'gomeplus.com';\r\n            }\r\n        }\r\n        return 'm.' + _host;\r\n    }\r\n});\r\n\r\n//协议头\r\nlet protocal = '';\r\n\r\nif(env.hybrid){\r\n    if(env.gome && system.ios && version >= 75){\r\n        protocal = 'https:';\r\n    }else if(env.gomeplus && system.ios){\r\n        protocal = 'https:';\r\n    }else{\r\n        protocal = 'http:';\r\n    }\r\n}\r\n\r\nhost.m     = protocal + '//'       + host.__root;\r\nhost.prom  = protocal + '//prom.'  + host.__root;\r\nhost.jr    = protocal + '//jr.'    + host.__root;\r\nhost.hd    = protocal + '//hd.'    + host.__root;\r\nhost.v     = protocal + '//v.'     + host.__root;\r\nhost.tuan  = protocal + '//tuan.'  + host.__root;\r\nhost.u     = protocal + '//u.'     + host.__root;\r\nhost.item  = protocal + '//item.'  + host.__root;\r\nhost.q     = protocal + '//q.'     + host.__root;\r\nhost.cart  = protocal + '//cart.'  + host.__root;\r\nhost.pt    = protocal + '//pt.'    + host.__root;\r\nhost.club  = protocal + '//club.'  + host.__root;\r\nhost.protocal = protocal;\r\n\r\nhost.service = {}\r\nObject.defineProperty(host.service, '__root', {\r\n    get: () =>{\r\n        let _host = '';\r\n        if(env.hybrid){\r\n            //混合app\r\n            //国美在线\r\n            if(!env.gome){\r\n                //默认美信\r\n                if(env.live)\r\n                    _host = 'mobile.gomeplus.com';\r\n                else if(env.uat)\r\n                    _host = 'mobile.uatplus.com';\r\n                else if(env.tslive)\r\n                //瞎写的\r\n                    _host = 'mobile.tsliveplus.com';\r\n                else\r\n                    _host = 'mobile.gomeplus.com';\r\n                \r\n            }else{\r\n                if(env.live)\r\n                    _host = 'mobile.gome.com.cn';\r\n                else if(env.uat)\r\n                    _host = 'mobile.atguat.com.cn';\r\n                else if(env.tslive)\r\n                    _host = 'mobile.tslive.com.cn';\r\n                else\r\n                    _host = 'mobile.gome.com.cn';\r\n            }\r\n        }else{\r\n            //混合app\r\n            //国美在线\r\n            if(location.href.match(/gome\\.com\\.cn|atguat/)){\r\n                if(env.live)\r\n                    _host = 'mobile.gome.com.cn';\r\n                else if(env.uat)\r\n                    _host = 'mobile.atguat.com.cn';\r\n                else if(env.tslive)\r\n                    _host = 'mobile.tslive.com.cn';\r\n                else\r\n                    _host = 'mobile.gome.com.cn';\r\n            }else{\r\n                //默认美信\r\n                if(env.live)\r\n                    _host = 'mobile.gomeplus.com';\r\n                else if(env.uat)\r\n                    _host = 'mobile.uatplus.com';\r\n                else if(env.tslive)\r\n                //瞎写的\r\n                    _host = 'mobile.tsliveplus.com';\r\n                else\r\n                    _host = 'mobile.gomeplus.com';\r\n            }\r\n        }\r\n        return _host;\r\n    }\r\n});\r\n\r\n\r\nhost.service.cms = (function(){\r\n    let pre\r\n    if(!env.hybrid && !env.gome){\r\n        pre = 'https://prom-'\r\n        if(!env.live){\r\n            pre = 'http://prom.'\r\n        }\r\n    }else{\r\n        pre = protocal + '//prom-'\r\n    }\r\n    return pre + host.service.__root\r\n})();\r\n\r\nfunction gomeplusRoot(){\r\n    if(env.uat){\r\n        return 'pre.gomeplus.com'\r\n    }else if(env.tslive){\r\n        return 'pre.gomeplus.com'\r\n    }else{\r\n        return 'pro.gomeplus.com'\r\n    }\r\n}\r\n\r\nhost.service.gomeplus = (function () {\r\n    \r\n    if(env.uat){\r\n        return 'https://api-bs-pre.gomeplus.com'\r\n    }else if(env.tslive){\r\n        return 'https://api-bs-pre.gomeplus.com'\r\n    }else{\r\n        return 'https://api-bs.gomeplus.com'\r\n    }\r\n})()\r\n\r\nexport {host};\r\nexport default host;\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-host/index.js","/*\r\n * @Author: zhaoye \r\n * @Date: 2017-02-16 21:00:49 \r\n * @Last Modified by: renqingyue\r\n * @Last Modified time: 2017-07-17 14:34:17\r\n */\r\nimport {env} from 'gome-utils-env'\r\nimport eventbus from 'gome-utils-eventbus'\r\nimport Query from 'gome-utils-query'\r\nfunction mixin (dest, src) {\r\n    for (let key in src) {\r\n        if (typeof dest[key] == 'undefined') {\r\n            dest[key] = src[key];\r\n        }\r\n    }\r\n    return dest\r\n}\r\n\r\nfunction cb (cb, promisecb, ...params) {\r\n    if(cb)cb(...params);\r\n    if(promisecb)promisecb(...params)\r\n}\r\n\r\nlet jsonpCntr = 0;\r\nexport default function (opt, ok, fail) {\r\n    opt = mixin(opt, {\r\n        url: '',\r\n        //get,post,jsonp\r\n        type: 'get',\r\n        //params\r\n        data: '',\r\n        //true(default), false\r\n        isNeedLoading: 'Y',\r\n        //N(default)\r\n        isPostBody: 'N',\r\n        //启用cors\r\n        cors: 'N'\r\n    })\r\n    //非混合app域名不同自动jsonp\r\n    if(!env.hybrid && !opt.url.match(window.location.host) && opt.cors != 'N'){\r\n        opt.type = 'jsonp'\r\n    }\r\n    return Promise.resolve(new Promise((resolve, reject) => {\r\n        //混合app app代理\r\n        if(env.hybrid && !opt.type.match(/jsonp/i)){\r\n            opt.type = opt.type.toUpperCase();\r\n            let request = mixin(opt, {\r\n                param: opt.data,\r\n                isNeedLoading: 'Y',\r\n                isPostBody: 'N',\r\n            });\r\n            delete request['data'];\r\n            navigator.gome.util.nativeRequest.sendNativeRequest(function(data){\r\n                data = typeof data === 'string' ? JSON.parse(data) : data\r\n                cb(ok, resolve, data);\r\n            },function(e){\r\n                try{\r\n                    e = typeof e === 'string' ? JSON.parse(e) : e\r\n                    cb(fail, reject, new Error(e.failReason || '网络请求失败'));\r\n                }catch(_e){\r\n                    reject(new Error('网络请求失败'))\r\n                    cb(fail, reject, new Error('网络请求失败'))\r\n                }\r\n            }, request);\r\n        }else if(opt.type.match(/jsonp/i)){\r\n            //jsonp\r\n            if(opt.isNeedLoading == 'Y'){\r\n                eventbus.emit('loading.lazy')\r\n                eventbus.emitDOM('loading')\r\n            }\r\n            if(!opt.isPostBody || opt.isPostBody == 'N'){\r\n                var param = encodeURI(JSON.stringify(opt.data));\r\n                var script = document.createElement('script');\r\n                script.setAttribute('defer','defer')\r\n                script.setAttribute('async','async')\r\n                script.src = opt.url+'?bust=' + (new Date()).getTime()+'&body='+param+'&callback=' + (opt.cb || ('jsonp'+jsonpCntr))\r\n            }else{\r\n                var param = '';\r\n                for(var key in opt.data){\r\n                    param += '&'+key+'='+opt.data[key];\r\n                }\r\n                var script = document.createElement('script');\r\n                script.setAttribute('defer','defer')\r\n                script.setAttribute('async','async')\r\n                script.src = opt.url + '?bust=' + new Date().getTime() + param + '&callback=' + ( opt.cb || ('jsonp'+jsonpCntr))\r\n            }\r\n            var isResolved = false;\r\n            var isRejected = false;\r\n            var _ok = function(data){\r\n                if(isRejected)return;\r\n                isResolved = true;\r\n                data = typeof data == 'string' ? data.replace(/\\n/g,'') :　data;\r\n                try{\r\n                    data = typeof data == 'string' ? JSON.parse(data) : data;\r\n                    eventbus.emit('loaded')\r\n                    eventbus.emitDOM('loaded')\r\n                    cb(ok, resolve, data);\r\n                }catch(e){\r\n                    eventbus.emit('loaded')\r\n                    eventbus.emitDOM('loaded')\r\n                    cb(fail, reject, data);\r\n                }\r\n            }\r\n            window[opt.cb || ('jsonp'+jsonpCntr)] = _ok\r\n            setTimeout(function(){\r\n                if(isResolved || isRejected)return;\r\n                isRejected = true;\r\n                eventbus.emit('loaded')\r\n                eventbus.emitDOM('loaded')\r\n                cb(fail, reject, new Error('JSONP Error'));\r\n            },opt.timeout || 20000)\r\n            script.onerror = function(){\r\n                if(isResolved || isRejected)return;\r\n                isRejected = true;\r\n                eventbus.emit('loaded')\r\n                eventbus.emitDOM('loaded')\r\n                cb(fail, reject, new Error('JSONP Error'));\r\n            }\r\n            jsonpCntr++;\r\n            document.body.appendChild(script)\r\n        }else{\r\n            //ajax\r\n            var ajax = new window.XMLHttpRequest();\r\n            if(opt.type.match(/get/i)){\r\n                opt.url = opt.url + Query.queryify(opt.data)\r\n            }\r\n            ajax.open(opt.type, opt.url, true);\r\n            if(opt.isNeedLoading == 'Y'){\r\n                eventbus.emit('loading.lazy')\r\n                eventbus.emitDOM('loading')\r\n            }\r\n            ajax.setRequestHeader('Accept','*/*')\r\n            ajax.setRequestHeader('X-Requested-With','XMLHttpRequest')\r\n            if(opt.type.match(/get/i)){\r\n                ajax.send(null);\r\n            }else if(opt.type.match(/post/i)){\r\n                let param = \"\"\r\n                for(let key in opt.data){\r\n                    let obj\r\n                    if(typeof opt.data[key] == 'object')\r\n                        obj = new Object(JSON.stringify(opt.data[key]))\r\n                    else\r\n                        obj = opt.data[key]\r\n                    param += encodeURIComponent(key) +\"=\"+obj+\"&\"\r\n                }\r\n                if(param)\r\n                    param = param.replace(/\\&$/,'')\r\n                else\r\n                    param = null\r\n                ajax.setRequestHeader('Content-Type','application/x-www-form-urlencoded')\r\n                ajax.send(param);\r\n            }\r\n            ajax.onreadystatechange = () => {\r\n                let result;\r\n                if(ajax.readyState == 4){\r\n                    if (ajax.readyState == 4) {\r\n                        ajax.onreadystatechange = () => {};\r\n                        if ((ajax.status >= 200 && ajax.status < 300) || ajax.status == 304 || (ajax.status == 0 && window.location.protocol == 'file:')) {\r\n                            if (ajax.responseType == 'arraybuffer' || ajax.responseType == 'blob')\r\n                                result = ajax.response\r\n                            else {\r\n                                result = ajax.responseText\r\n                            }\r\n                            try{\r\n                                const data = JSON.parse(result);\r\n                                eventbus.emit('loaded');\r\n                                eventbus.emitDOM('loaded')\r\n                                cb(ok, resolve, data);\r\n                            }catch(e){\r\n                                eventbus.emit('loaded');\r\n                                eventbus.emitDOM('loaded')\r\n                                cb(ok, resolve, result);\r\n                            }\r\n                        }else{\r\n                            eventbus.emit('loaded');\r\n                            eventbus.emitDOM('loaded')\r\n                            cb(fail, reject, new Error('网络请求失败'));\r\n                        }\r\n                    }else{\r\n                        eventbus.emit('loaded');\r\n                        eventbus.emitDOM('loaded')\r\n                        cb(fail, reject, new Error('网络请求失败'));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }));\r\n}\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-http/index.js","/*\r\n * @Author: zhaoye \r\n * @Date: 2017-01-03 18:17:04 \r\n * @Last Modified by:   zhaoye \r\n * @Last Modified time: 2017-02-22 12:58:17 \r\n */\r\nimport {system} from 'gome-utils-env'\r\n\r\nlet version = -1;\r\nif(system.android && navigator.userAgent.match(/gome/))\r\n    version = navigator.userAgent.match(/gome[plus]{0,4}\\/[iphone\\/]{0,7}(\\d*)/)[1];\r\nelse if(system.ios && navigator.userAgent.match(/gome/))\r\n    version = navigator.userAgent.match(/gome[plus]{0,4}\\/[iphone\\/]{0,7}(\\d*)/)[1];\r\n\r\nexport default version;\n\n\n// WEBPACK FOOTER //\n// node_modules/gome-utils-app-version/index.js"],"mappings":";;;;;;;;;;;AAAA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;;;ACNA;;;;;;;AAOA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAnCA;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIA;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;;;;;;;;;;ACpBA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AAGA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAKA;AAEA;AACA;AAKA;AACA;AAhBA;AAqBA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjLA;AACA;AAAA;AAEA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;;;;;;;;;;;;;;;ACbA;AACA;AAAA;AACA;;;;;AAXA;;;;;;;AAOA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAKA;AACA;AAGA;AACA;AACA;AACA;AAQA;AACA;AACA;AAKA;AACA;AAGA;AACA;AACA;AACA;AAnDA;AACA;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AAIA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAKA;AACA;AAGA;AACA;AACA;AACA;AAtDA;AACA;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5LA;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtLA;AACA;AAAA;AACA;;;AAAA;AACA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AACA;AACA;;;;;;;AACA;AACA;AAIA;;;;A","sourceRoot":""}